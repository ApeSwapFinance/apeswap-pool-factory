const PoolManager = artifacts.require("PoolManager");
const RewardApeFactory = artifacts.require("RewardApeFactory");

module.exports = async function(deployer, network, accounts) {
    /*
        Step 0: Confooger zeee varyoobles
    */

    const adminAddress = "0x6c905b4108a87499ced1e0498721f2b831c6ab13"
    const GNANA = "0xddb3bd8645775f59496c821e4f55a7ea6a6dc299";
    const BUSD = "0xe9e7cea3dedca5984780bafc599bd69add087d56";

    /*
        Step 1: Deploy Pool Manager & Add authorized members
    */

    await deployer.deploy(PoolManager, GNANA);
    const poolManager = await PoolManager.at(PoolManager.address);

    await poolManager.addAuthorized(accounts[0]);
    await poolManager.addAuthorized(adminAddress);

    /*
        Step 2: Add All Pools
    */

    // Add all non-legacy pools
    const pools = ["0x8F97B2E6559084CFaBA140e2AB4Da9aAF23FE7F8","0x0245c697a96045183048cdf18e9abae5b2237ff6","0x7336B60aC64a5Bf04Eec760bD135ea105994387C","0x726d5A4D170425C98BAff117BF3d9aF9f77f80bd","0x72C8750af0744282E065F0dF3F73460A3764c624","0x1900f5370830F0aa46DF76a6a4F0656Ef321b9f8","0xA007a5a8165D70DdFBC230927Cd639163228Fc72","0x834534853bff9C97F8A9b0fb9FFF864E3584Df99","0x8e6f61f855a7483E29c8E87BF221C73e10b49738","0x7618c42Fb5DC96F3C238FEC799B440AEd7c56E03","0x5798271B134e27c4dE28CB33aa8D18e5753e83fC","0xEdea59e33A6D0A2d491Aa818f6E08ea18DE13c32","0x6FbB19A87f1E86f027A084C8bfc3528120Cf8249","0xa3283C497710cbBE31d35A5cf56C315C621D6e10","0x1697b103a72299d5db4e39ef28a32991c347be23","0xd65f1319f6408C03EBA7f27e156391784492A9EF","0x7124d635a4bb82319acfd57ce9da18137a7a6f22","0x465a3782d9014e6eefccc21470c5e41b2cad9d6d","0xEedd7475Eb5D05D591bE0927B178AcBBdC5ee1c1","0x73775564d2cbad604c41d0b3ddf061e80e1d0279","0x48ee3f7748fac3e8e4858bd0b09483c4339d3d7e","0xe44d4786e9d367a475a0789dc618c76a2b2d05ec","0x4b5ee00fcce905cc2861c8255b368cf9f114c667","0x52634C2763a6DADA2028440d0892431b04809d88","0x1C62ac4D59FFACb35BFfcDb9fcd8b368a528B544","0x222c821620480f7482238dd3B71A7051d02c9624","0x73dAF9AfEBB271007167f3f0D140a35f5b1a7058","0xAC4409CC7709783c7CCEb6c6e69Fe42fAD192623","0x52F5f16F90B897AB9C2c7d3028FEF9e11B2BB485","0xfd9c606d3Ff6AC1b044C4F5C0A9Fa934634bD2e8","0x15C4200e694e4A0223191Ec717906CBA82F54745","0xc417D9D9b01b5985c1720cA89B963c2417821bdC","0x6D5A4371B0B658765D5282Ae64eFaf9e6f9A4600","0x19383690321291cb00de31ddec94f4596d504f5a","0x33a8CE49cFBdeF61e5E494f769b5626d395a56f3","0x1851a14b9b6bcd55b57da6bfd11f7fb5ae8c3d01","0x4fa77345de3d991625cbf3317cb449f729378d34","0x14e87345dd641a222a353d1fb0de5f0e66d0668e","0x49605d4d0bdf049a9c3f20f59e066662a086a9a8","0x98cb2265f54d8aed72ea78d207f068961f0630a4","0x92f5927fb750593b00ac933d296d9230d6f8b421","0xfa1e8344e8316b4c7ca4d9f9359154bd3b42b427","0x32d5dae00cf9ec718e6054cbe5f307b9e8ed80e9","0x2f70e1ab58231e1981915c1b3434144dcf26868f","0x5a10311f7d03a6e7ab464da54bdd535f3d4ce512","0x6e8cd8e267e4a8538b7119c3ca30ce04667070e5","0x063e98d9f0484c07028eb78661df554a064aeb05","0x2555190c9f515877ac88defc2242a4e91aa49021","0x0a509adf33e7094f3bd15c0062debd3aef2bce28","0x99dc608804adf5c5e9701b829fefbd618da14c5b","0xaffd843b548f70cc586cdecb2dd0e85be5349e96","0x82ee644a04573aebbfbf3d7fa98f20922a5c606a","0x51c58fb9a61c00e3e4cd09b499726ba1cd3dd261","0xE6C5DAfc5BAeb927Bc56B3a4154eDeCFDbB937d6","0x73d3d28cc018a89fe6518d7b5efbcfcf0695a0d9","0x44b7e5593dfc65208a2b68c3f6c1cffd881ef6fb","0x4632d4ff6312c9a00c6440c9271f0061aaa49a4b","0xade70b187429e3cf4a8dd476ecba8ce9002621ec","0x189aE88B8Df159BDB28260E86e87D770F2FC384D","0x64fc4bf63c4315156f56b953a42bf2459b227a68","0x03f344ceb868841ffa262503fe1cf21b9cd5d7a8","0x7ef515eac1cf68cde1bdbee2cda8707815e1a3c3","0x372c7b2c017aa055b6bd18b2d250b7dfc7593f5a","0xae6b44c1857d48512f1cebc0f2a55e02a751969c","0xbc2329abb85e0a3dc7e5bfd01901374bd4162831","0xa38e86fa40bff9a82bb0fdcca8002f34d08f64b9","0x8440870a806e73977c5f094376a5ac8e41d9db0b","0x68741f87120e158dd8b4e972c54a6b062d3958b9","0xc8fdda71305ff3001e84ef31f3f28460da4535ff","0x02f93496a75c430433a61f99c9d3f21278ee13d3","0xf45d14aa2844c14ee8a06a1bff1daa99656cf65c","0xcfaa62b60575c0808b24b2253e107fc8aa992ef4","0x68696e139a7bf935285ad7d0b590ccf66ba622ba","0x7740bb8f6be130e62597b2554aab2d69bc33c25b","0xda04ae1d4651e63c130921c6227397d58dd9167a","0x272d18f546CFF72D1a5bBcA9e0E25F97A71FcA1a","0x9ab78C2209ad2Bd50de93Aa449f1C7898DBf7138","0xb5bb4897cb8024281732c36d8a438aab5b11ef19","0x08b86811dcee75a37790dc28f3ad09776215ba7a","0x891e730df271d2c8da987651b9e7a4b9130f29b6","0x2179526cfc163afb6d6cba686f0540b699028350","0xdbb5df464f245d3b62b5fea995580f837f87fc12","0xa782cab148a3d33498e7f85b0491d4f364609c22","0x03643a66e0a121839d230364fab392aa583cb984","0xce12fb8d5e3f1acb469c8b9f657fd8188ca21e87","0x05db8d4a67d293b43aa1db8cf38850fe790dbf29","0x84cda09920232b5b138180b55759b218bf243645","0xac19462e8c9207cd1613292b93b5f7c65f1a597a","0xde182dad837db2117e2981b1f94dec2cec8191cc","0x502b015f0c4493e1e6414de471041347c58b0d97","0xc6215d86a4bb470667d54c316624a3c45504bc31","0x5d8b37C42c34CA1661dB227B5484726d89040702","0xc8ff8674a03672c36d6b5e2cbbf8f7967b14aef6","0x7b4459a0ce06f2ebb8b145add6620ae06ff225ed","0x946a0e7b410cfc4e225a3e9f09a93259747b0903","0x96034cd42b0eaa1a6dae20e1a13824aede3ba1f0","0x122365722070a9ca5d12040e511bb90f722b915c","0x3902e6220c8425dcfb86118413481c6a625b28ba","0x155bd20237a70994364723e44416fd602b8d0991","0x3c765c830a082944f4b69052670d41cf5b513846","0x96d643e487e408c59c10b654976567aa2f1a16d3","0xcf44a7c1d8277b27c47195f0907a5b93e63d3dd0","0xde99115c3f8ee876b5520779665088f70f647a6d"]
    const pools2 = ["0xcfae247209b2f3c175ddaca619a7874447e534cd","0x8b82c8a380a4c7edd68a4df2d4b09a52b5704c3b","0x824b23f47da94055434242c1100dfa71cc691f83","0x0a935f40a288cb67ee86565a2b1113f5c7fe481d","0x0f1c37bea4984cf57e850929e839782e33790c8d","0x07f874ad2b3546164a33f4b6c27494ac9c1d3323","0x9B5919a87d727e17A1fa9116E4547A52A7f159ea","0x1e20b8629602a28065f1daacf6155456063de290","0x656e0f20509b3eb04dbccae5a0e6c2a08e615e20","0xea5b77b22bd939b8196587d2bb9d8b5e0e497b74","0xb83D0cE7335CaF7c59e7B9727916C0e98b74cb49","0x004D7f0661fF6e1420fE311Bca57C1D89C9751BA","0x4AC61236F70bC24eDf6be97746672ab564641258","0x7077d94ca36cdcce214a9073fe9e4a865332bfc2","0x2dC448eF0Af4cDc299D2085CBC439459243E14aE","0x565478B15dDABCDAf8B42528a0bD6a1c04ce070b","0xd95bBDEDE9ECbC2410bd78a66ded971BF3E8ff47","0x7de443badcfcf49417864f70fe7734b8144082f1","0xc69a306e50b8ee373155746a0b6d457af4035d4b","0x2Af85A532859aF6f30076197D91eEEb593C0FeB1","0x5E4Aa216B9e748e83D02b1F0334A0B8EB5ee9c32","0x387021bA95c80856Be8B061533c67b47b5c148a6","0xd4b688873df6af18f5fd9e226730adcce635f5eb","0xB49baE5D0230A3D57C6CAFEab71a418CF62e4813","0x61713875F0759803DD1C7e2a83ACd11265Ff80BB","0xc00EAbba05a314E52653fAB3fdB4861C7B11535F","0xC4527Fb81764E632509234cE78F5C91cc86C7162","0xEc197AA9202a9111618BaA7a23b6A7Cd7B6Ea7d7","0xe505e0142e3ea84e4e6ed006d9b264688374ec7b","0x008fd008A139187aD57DD7E030BE00252E3eD757","0x45d94C84cd5d150F1D6037f35f4dcaA6e1369ae8","0x66a17DAcE2d77f036422BDD50F3A20579613f5C0","0x3b15B487902Bb10Cba34c489Cb35AC342F73Cff2","0xd0378c1b37D530a00E91764A7a41EfEB3d6A5fbC","0x633dd43b5f056ab9362162894f1e451f4d704681","0x18d9d84e6649fe0f3e60c338ff5a9e96d5f85702","0x8b91f9584dD43Ba4aEd7729b33aA1D459af1c5cc","0xe4d4ffd1c58d21858f0a8cf915aa2b422740328d","0x8966eda482ca1559cfea937da58f217fd1f2a468","0xb28d423765c7c906a3e55af54cea716c97df1f8d","0xc573890a14b3dddffade9a2bd7e6bada160724b6","0xcFA6CAEd7E2eCB4411254B1444E31dE43824b3E8","0xEbd0Cd94DC2BE20575EcdC0370a7d9A2c1AeD40c","0xca676dfEbcfC16bF0aA10e7D6291E92F69c61f50","0xaaF270fb5Ffa43ea2F49DE261E805D1efF06FDEE","0x4CA13C1b85211aBC06455a164A15a2Ef6a1733E0","0x31BA18dF9a445D2E01Aa55B393cde86b149CBC4A","0xb0329d2A9BA4BC1ff7D4944412EF8DF0D4bDF304","0x9f3Fa4d728F26C9bb53a0641C51A5657544E257A","0x24CD8C40d0B47Fd0E12D03A0d56fFfD44dD31f3F","0x57f626abfc72b914e68def65c3e1f27a59225cc3","0xb1c0a6518b766809dac889f2e49134864ea2cb57","0x00262752032F07C51216B57909F175C972002393","0x0F555e92e9470d064F8A6D0b97a2E3F7d26A222d","0xFdE855148B160F203761569A9c0A8a1aA7d565B3","0x7f3CECE71e89137911Da0B20bdd5cfE0e0c8B7f5","0x4853D276Bd747227E05698DB832b87d7B7C76079","0x7a13FEb86802f979B536b8706C7c598ef2812294","0x6e4Ac7608ADA81F740090Df60b585bd12B30F77C","0xc5a313375D986Ee70FA51a4890aEB8EeB8A5D33B","0x5011c848cf4f6ff10085466de76257ac2adc1381","0x448B5c60baa2E7D85334706494845b71F07151EE","0x1f875b9Be60b7bccac6555D5f9fc931Ae5Ff032B","0x363f3b8471223f66a09f65f1253cd41be916fb51","0x59A4B153D080E3066236e57f6Bd66Ad241eb0269","0x75768Ea1A1C3c84121063f7A281ee3081dB1D8Ef","0x57dDbdC52e402d7F2Fffef9FEEC82CBBCD361f87","0x3ece92fa22766d4a514cddace768d085e75e59cf","0xA6B0f91e3eda93Db4266416CC43Ea4E35149D0dF","0xf2f96bb2850Ea1125Cf5f2c930A4aC51abE37fd4","0x623eb348969ed6512005efbf3716e5e1919562aa","0x0ADBa369180802282C921F18879Bc40305D92dA4","0x59258b42648486C3A3DF24a526996f82F526a9a3","0xc5EA4c201F9D9E052e197811a7bbDd56680F8Fcd","0x1B40F1B7E871C0de135AF42E15015d16988310ee","0x3490F8a48B421647E853DF8Ec82610Ac60bBD727","0x78A81CC8a83DDe46B352Ab7e478C1Ebe087CD5b6","0x03BC491529B6443b263398A366E4424f6F669224","0x6bE84367AC627617c3d4143fbBD288cC5e9fb7c3","0x4ad206384a88d53a80f45407da12dd6af95c1db1","0xE4417357B022224736CA845856917aAaE912c0bD","0x420B9baD20d43D561377615325E60d5B7CdB1B35","0xbc3f5571fc3338d0b9216a2c5c2e6f338531e3f8","0xc8519d981a99c9a56364895c6d37eea686d70540","0xf4195c4ddb10db3df27816bb70dc342d861a7561","0x1e7133e05d1b4bdab44cb5503fa4a801000c963a","0xc81af2222ac6ec0f3ec08b875df25326b40e7a76","0x84291c0e6b19cc833afc491561aacfbdd6885d63","0xc3a5dbb5121772628956b9ce709ec1dda6a94b4d","0xcd40fbe9eabc34faa59341c36c628e8867a22943","0xf1aFc0bfdf33BC74b9896612eAA38058cADfF8f0","0x5a92DDA1338073065Ef142fD02e3Af2Ebfb07212"];
    await poolManager.addPools(pools, false);
    await poolManager.addPools(pools2, false);

    // Add legacy pool
    await poolManager.addPools(["0x8F97B2E6559084CFaBA140e2AB4Da9aAF23FE7F8"], true);

    /*
        Step 3: Deploy Pool Factory
    */
    await deployer.deploy(RewardApeFactory, adminAddress, PoolManager.address);
    const rewardApeFactory = await RewardApeFactory.at(RewardApeFactory.address);
    
    /*
        Step 4: Give Pool Factory Permission on the Pool Manager then transfer factory ownership to admin
    */
    await poolManager.addAuthorized(RewardApeFactory.address);
    await poolManager.transferOwnership(adminAddress);

    /*
        Step 5: Deploy a new pool with the owner & it should be added to the list!
    */
    await rewardApeFactory.deployComputedPoolContract(
        GNANA, 
        BUSD, 
        "19000000",
        "5000000",
        "10000000000000000000",
        adminAddress
    )

    console.log('wow it all worky');
};